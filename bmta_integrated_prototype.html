<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMTA í†µí•© í”„ë¡œí† íƒ€ì…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@100;400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Pretendard', sans-serif; background-color: #f1f5f9; }
        .safe-area-bottom { padding-bottom: env(safe-area-inset-bottom); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .screen { display: none; height: 100%; flex-direction: column; background: white; }
        .screen.active { display: flex; }
        .tab-content { flex: 1; overflow-y: auto; }
        .mobile-container {
            width: 100%;
            max-width: 420px;
            height: 100vh;
            margin: 0 auto;
            background: #fff;
            position: relative;
            box-shadow: 0 0 50px rgba(0,0,0,0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        @media (min-width: 420px) {
            .mobile-container { height: 840px; margin-top: 20px; border-radius: 40px; border: 8px solid #1e293b; }
        }
        .animate-slide-up { animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body>

<div class="mobile-container">
    <!-- Header -->
    <header id="app-header" class="h-16 flex items-center justify-between px-6 border-b shrink-0 bg-white z-20">
        <div class="flex items-center gap-2">
            <div class="bg-indigo-600 p-1 rounded-lg">
                <span class="text-white font-black italic text-xs tracking-tighter">BMTA</span>
            </div>
            <h1 id="header-title" class="font-bold text-slate-800">BMTA</h1>
        </div>
        <div class="flex gap-4 text-slate-400">
            <button onclick="showAlert('ì•Œë¦¼í•¨ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.')"><i data-lucide="bell" class="w-5 h-5"></i></button>
            <button onclick="navigateTo('mypage')"><i data-lucide="user" class="w-5 h-5"></i></button>
        </div>
    </header>

    <!-- Main Content Area -->
    <div class="flex-1 relative overflow-hidden">
        
        <!-- [SCR-001] Bus ì‹¤ì‹œê°„ -->
        <section id="screen-bus" class="screen">
            <div class="p-5 space-y-6">
                <div class="relative">
                    <input type="text" placeholder="ë²„ìŠ¤ ë…¸ì„  ë˜ëŠ” ì •ë¥˜ì¥ ê²€ìƒ‰" class="w-full bg-slate-100 border-none rounded-2xl py-4 pl-12 pr-4 text-sm focus:ring-2 focus:ring-indigo-500">
                    <i data-lucide="search" class="absolute left-4 top-4 text-slate-400 w-5 h-5"></i>
                </div>
                <div>
                    <h3 class="font-bold text-slate-800 mb-3 flex items-center gap-2"><i data-lucide="map-pin" class="w-4 h-4 text-indigo-500"></i> ê·¼ì²˜ ì •ë¥˜ì¥</h3>
                    <div class="space-y-3">
                        <div class="bg-white border rounded-3xl p-5 shadow-sm flex justify-between items-center">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 bg-indigo-600 rounded-2xl flex items-center justify-center text-white font-black text-lg shadow-lg shadow-indigo-100">143</div>
                                <div>
                                    <p class="text-sm font-bold text-slate-800">ì •ë¦‰ë°©í–¥</p>
                                    <p class="text-xs text-slate-400">ê°•ë‚¨ì—­.ê°•ë‚¨ì—­ì‚¬ê±°ë¦¬</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="text-lg font-black text-orange-500">3ë¶„</p>
                                <button onclick="goToFeed('ë²„ìŠ¤', '143')" class="text-[10px] font-bold text-indigo-600 bg-indigo-50 px-2 py-1 rounded-full mt-1">í”¼ë“œ ê°€ê¸°</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- [SCR-002] ë©”íƒ€ -->
        <section id="screen-metro" class="screen">
            <div class="h-full flex flex-col">
                <div class="p-4 flex gap-2 overflow-x-auto no-scrollbar border-b">
                    <button class="px-4 py-1.5 bg-slate-800 text-white rounded-full text-xs font-bold whitespace-nowrap">ìˆ˜ë„ê¶Œ</button>
                    <button class="px-4 py-1.5 border rounded-full text-xs font-bold text-slate-400 whitespace-nowrap">ë¶€ì‚°</button>
                    <button class="px-4 py-1.5 border rounded-full text-xs font-bold text-slate-400 whitespace-nowrap">ëŒ€êµ¬</button>
                </div>
                <div class="flex-1 bg-slate-50 flex items-center justify-center relative">
                    <div class="text-slate-300 font-bold opacity-30 select-none">ì§€í•˜ì²  ë…¸ì„ ë„ ì¸í„°ë™ì…˜ ì˜ì—­</div>
                    <button onclick="showStationDetail('ê°•ë‚¨ì—­')" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-10 h-10 bg-green-500 rounded-full border-4 border-white shadow-xl animate-pulse"></button>
                </div>
            </div>
        </section>

        <!-- [SCR-003] ê²Œì‹œê¸€ (Live Feed) -->
        <section id="screen-feed" class="screen active">
            <div class="flex flex-col h-full">
                <!-- 2-Layer Filters -->
                <div class="p-4 border-b bg-white space-y-3 shrink-0">
                    <div class="flex gap-2">
                        <button onclick="setTransportFilter('ì „ì²´')" class="filter-t flex-1 py-2 rounded-xl text-xs font-black bg-indigo-600 text-white" data-val="ì „ì²´">ì „ì²´</button>
                        <button onclick="setTransportFilter('ë²„ìŠ¤')" class="filter-t flex-1 py-2 rounded-xl text-xs font-black bg-slate-100 text-slate-400" data-val="ë²„ìŠ¤">ë²„ìŠ¤</button>
                        <button onclick="setTransportFilter('ì§€í•˜ì² ')" class="filter-t flex-1 py-2 rounded-xl text-xs font-black bg-slate-100 text-slate-400" data-val="ì§€í•˜ì² ">ì§€í•˜ì² </button>
                        <button onclick="setTransportFilter('íƒì‹œ')" class="filter-t flex-1 py-2 rounded-xl text-xs font-black bg-slate-100 text-slate-400" data-val="íƒì‹œ">íƒì‹œ</button>
                    </div>
                    <div class="flex gap-2 overflow-x-auto no-scrollbar pt-1 border-t">
                        <button class="px-4 py-1.5 border border-slate-800 rounded-full text-[10px] font-black shrink-0">ì „ì²´</button>
                        <button class="px-4 py-1.5 border border-slate-100 rounded-full text-[10px] font-bold text-slate-400 shrink-0">ì‹¤ì‹œê°„ í†¡</button>
                        <button class="px-4 py-1.5 border border-slate-100 rounded-full text-[10px] font-bold text-slate-400 shrink-0">ë¶„ì‹¤ë¬¼</button>
                        <button class="px-4 py-1.5 border border-slate-100 rounded-full text-[10px] font-bold text-slate-400 shrink-0">ì‚¬ëŒ ì°¾ì•„ìš”</button>
                    </div>
                </div>
                <!-- Feed List -->
                <div id="feed-list" class="flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50">
                    <!-- Hot Issue -->
                    <div class="bg-gradient-to-br from-indigo-600 to-blue-600 rounded-[2rem] p-5 text-white shadow-xl shadow-indigo-100 relative overflow-hidden">
                        <div class="absolute -right-4 -top-4 opacity-20"><i data-lucide="flame" class="w-24 h-24"></i></div>
                        <div class="flex gap-2 mb-2"><span class="bg-white/20 text-[10px] px-2 py-0.5 rounded-full font-black">HOT</span><span class="text-[10px] opacity-70">ì§€í•˜ì²  2í˜¸ì„ </span></div>
                        <p class="font-bold text-sm leading-snug">ì§€ê¸ˆ ê°•ë‚¨ì—­ 2ë²ˆ ì¶œêµ¬ ë¶•ì–´ë¹µ ì¤„ ìƒí™© ì‹¤ì‹œê°„ ì œë³´í•©ë‹ˆë‹¤!</p>
                        <div class="flex gap-3 mt-4 text-[10px] opacity-70"><span>ğŸ‘ 124</span><span>ğŸ‘€ 3,420</span></div>
                    </div>
                    <!-- Normal Posts -->
                    <div onclick="navigateTo('post-detail')" class="bg-white rounded-3xl p-5 border border-slate-100 shadow-sm active:scale-95 transition-transform cursor-pointer">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-center gap-2">
                                <div class="w-8 h-8 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center font-black text-xs">ë²„ìŠ¤</div>
                                <div>
                                    <p class="text-[10px] font-black text-indigo-600">143ë²ˆ</p>
                                    <h4 class="font-bold text-slate-800 text-sm">ëª©ë„ë¦¬ ì£¼ì› ìŠµë‹ˆë‹¤!</h4>
                                </div>
                            </div>
                            <span class="text-[10px] text-slate-300">2ë¶„ ì „</span>
                        </div>
                        <p class="text-xs text-slate-500 line-clamp-2 leading-relaxed">ì˜¤ëŠ˜ ì•„ì¹¨ ë²„ìŠ¤ ë’·ìë¦¬ì—ì„œ í•˜ëŠ˜ìƒ‰ ëª©ë„ë¦¬ ì£¼ì› ì–´ìš”. ê¸°ì‚¬ë‹˜ê»˜ ë§¡ê²¨ë‘ì—ˆìŠµë‹ˆë‹¤!</p>
                        <div class="flex justify-between items-center mt-4 pt-3 border-t border-slate-50">
                            <div class="flex gap-3 text-[10px] text-slate-400 font-bold"><span>ğŸ‘ 12</span><span>ğŸ’¬ 2</span></div>
                            <span class="text-[10px] text-slate-300">ìµëª…ì˜ ìŠ¹ê°</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- FAB -->
            <button onclick="navigateTo('write-wizard')" class="absolute bottom-6 right-6 w-14 h-14 bg-indigo-600 text-white rounded-2xl shadow-2xl flex items-center justify-center hover:bg-indigo-700 active:scale-90 transition-all z-30">
                <i data-lucide="plus" class="w-8 h-8"></i>
            </button>
        </section>

        <!-- [SCR-004] ë§ˆì´í˜ì´ì§€ -->
        <section id="screen-mypage" class="screen">
            <div class="p-6 space-y-6">
                <div class="flex items-center gap-4 bg-slate-50 p-6 rounded-[2rem]">
                    <div class="w-16 h-16 bg-white rounded-2xl flex items-center justify-center shadow-sm text-indigo-600 font-black text-2xl">B</div>
                    <div>
                        <h3 class="font-bold text-slate-800">ìµëª…ì˜ ìŠ¹ê° <span class="text-indigo-600">âœ…</span></h3>
                        <p class="text-xs text-slate-400">tjddnd123@gmail.com</p>
                    </div>
                </div>
                <div class="bg-white border rounded-[2rem] overflow-hidden">
                    <div class="p-5 border-b flex justify-between items-center">
                        <span class="text-sm font-bold text-slate-600 flex items-center gap-2"><i data-lucide="coins" class="w-4 h-4 text-amber-500"></i> ë‚´ í¬ì¸íŠ¸</span>
                        <div class="flex items-center gap-2">
                            <span class="font-black text-slate-800" id="user-points">1,000 P</span>
                            <button onclick="showAlert('ì¶©ì „ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.')" class="bg-indigo-600 text-white text-[10px] px-3 py-1 rounded-lg font-black">ì¶©ì „</button>
                        </div>
                    </div>
                    <div class="p-5 flex justify-between items-center">
                        <span class="text-sm font-bold text-slate-600 flex items-center gap-2"><i data-lucide="message-circle" class="w-4 h-4"></i> ìª½ì§€ ìˆ˜ì‹  ì„¤ì •</span>
                        <div class="w-10 h-6 bg-indigo-600 rounded-full relative cursor-pointer"><div class="absolute right-1 top-1 w-4 h-4 bg-white rounded-full"></div></div>
                    </div>
                </div>
                <div class="space-y-2">
                    <button class="w-full text-left p-4 hover:bg-slate-50 rounded-2xl text-sm font-bold text-slate-600 flex justify-between items-center">ë‚´ê°€ ì“´ ê¸€ <span><i data-lucide="chevron-right" class="w-4 h-4"></i></span></button>
                    <button class="w-full text-left p-4 hover:bg-slate-50 rounded-2xl text-sm font-bold text-slate-600 flex justify-between items-center">ë‚´ê°€ ì“´ ëŒ“ê¸€ <span><i data-lucide="chevron-right" class="w-4 h-4"></i></span></button>
                </div>
            </div>
        </section>

        <!-- [SCR-005] ê¸€ì“°ê¸° ìœ„ì €ë“œ -->
        <section id="screen-write-wizard" class="screen fixed inset-0 z-50 animate-slide-up">
            <header class="h-16 flex items-center justify-between px-6 border-b shrink-0">
                <button onclick="navigateTo('feed')"><i data-lucide="x" class="w-6 h-6 text-slate-400"></i></button>
                <span class="font-bold text-sm">ì´ì•¼ê¸° ë‚¨ê¸°ê¸° (<span id="write-step-num">1</span>/3)</span>
                <div class="w-6"></div>
            </header>
            <div class="p-8 space-y-10">
                <!-- Step 1 -->
                <div id="step-1" class="write-step space-y-8">
                    <h2 class="text-2xl font-black text-slate-900 leading-tight">ì–´ë–¤ ìˆ˜ë‹¨ì„<br>ì´ìš© ì¤‘ì´ì‹ ê°€ìš”?</h2>
                    <div class="grid grid-cols-3 gap-3">
                        <button onclick="selectTransport('bus')" class="transport-btn p-5 border-2 rounded-3xl flex flex-col items-center gap-2 border-indigo-600 bg-indigo-50 text-indigo-600">
                            <i data-lucide="bus" class="w-8 h-8"></i><span class="text-xs font-bold">ë²„ìŠ¤</span>
                        </button>
                        <button onclick="selectTransport('metro')" class="transport-btn p-5 border-2 rounded-3xl flex flex-col items-center gap-2 border-slate-100 text-slate-300">
                            <i data-lucide="train" class="w-8 h-8"></i><span class="text-xs font-bold">ì§€í•˜ì² </span>
                        </button>
                        <button onclick="selectTransport('taxi')" class="transport-btn p-5 border-2 rounded-3xl flex flex-col items-center gap-2 border-slate-100 text-slate-300">
                            <i data-lucide="car" class="w-8 h-8"></i><span class="text-xs font-bold">íƒì‹œ</span>
                        </button>
                    </div>
                    <div class="space-y-2">
                        <label class="text-xs font-bold text-slate-400 ml-1">ìƒì„¸ ì •ë³´</label>
                        <input type="text" placeholder="ë…¸ì„  ë²ˆí˜¸ (ì˜ˆ: 143)" class="w-full bg-slate-50 rounded-2xl py-4 px-6 text-sm font-bold border-none focus:ring-2 focus:ring-indigo-500">
                    </div>
                    <button onclick="nextStep(2)" class="w-full bg-slate-900 text-white font-black py-4 rounded-2xl shadow-xl">ë‹¤ìŒ ë‹¨ê³„ë¡œ</button>
                </div>
                <!-- Step 2 & 3 (Omitted for brevity in mockup but logic exists) -->
                <div id="step-2" class="write-step hidden space-y-8">
                    <h2 class="text-2xl font-black text-slate-900 leading-tight">ë‚´ìš©ì„<br>ì‘ì„±í•´ì£¼ì„¸ìš”.</h2>
                    <div class="space-y-4">
                        <input type="text" placeholder="ì œëª© (20ì ë‚´ì™¸)" class="w-full bg-slate-50 rounded-2xl py-4 px-6 text-sm font-bold border-none">
                        <textarea placeholder="í•¨ê»˜ ë‚˜ëˆ„ê³  ì‹¶ì€ ì´ì•¼ê¸°ë¥¼ ì ì–´ì£¼ì„¸ìš”." class="w-full h-40 bg-slate-50 rounded-2xl py-4 px-6 text-sm border-none resize-none"></textarea>
                    </div>
                    <button onclick="submitPost()" class="w-full bg-indigo-600 text-white font-black py-4 rounded-2xl shadow-xl">ì´ì•¼ê¸° ë“±ë¡í•˜ê¸°</button>
                </div>
            </div>
        </section>

        <!-- [SCR-006] ê²Œì‹œê¸€ ìƒì„¸ -->
        <section id="screen-post-detail" class="screen fixed inset-0 z-40">
            <header class="h-16 flex items-center justify-between px-6 border-b shrink-0">
                <button onclick="navigateTo('feed')"><i data-lucide="chevron-left" class="w-6 h-6 text-slate-800"></i></button>
                <span class="font-bold text-sm">ë²„ìŠ¤ 143ë²ˆ</span>
                <button><i data-lucide="share" class="w-5 h-5 text-slate-400"></i></button>
            </header>
            <div class="flex-1 overflow-y-auto p-6 space-y-6">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-slate-100 rounded-full flex items-center justify-center text-xl">ğŸ‘¤</div>
                    <div>
                        <div class="flex gap-2 items-center">
                            <span class="text-sm font-bold text-slate-800">ì¹œì ˆí•œìŠ¹ê°</span>
                            <span class="text-[9px] bg-red-50 text-red-500 px-1.5 rounded font-black">#ë¶„ì‹¤ë¬¼</span>
                        </div>
                        <span class="text-[10px] text-slate-400">2ë¶„ ì „</span>
                    </div>
                </div>
                <h2 class="text-xl font-black text-slate-900">ì˜¤ëŠ˜ ì•„ì¹¨ í•˜ëŠ˜ìƒ‰ ëª©ë„ë¦¬ ì£¼ì› ìŠµë‹ˆë‹¤.</h2>
                <p class="text-sm text-slate-600 leading-relaxed">
                    143ë²ˆ ë²„ìŠ¤ ë§¨ ë’·ìë¦¬ì—ì„œ ëª©ë„ë¦¬ ë‘ê³  ë‚´ë¦¬ì‹  ë¶„ ê³„ì‹ ê°€ìš”?<br><br>
                    ì œê°€ ì¢…ì  ê¸°ì‚¬ë‹˜ê»˜ ë§¡ê²¨ë‘ì—ˆìœ¼ë‹ˆ ê¸°ì‚¬ë‹˜ê»˜ í™•ì¸í•´ë³´ì‹œë©´ ë  ê²ƒ ê°™ì•„ìš”! ì¶”ìš´ ë‚ ì”¨ì— ê°ê¸° ì¡°ì‹¬í•˜ì„¸ìš”.
                </p>
                <div class="flex gap-3 pt-6">
                    <button onclick="showAlert('í¥ë¯¸Up í¬ì¸íŠ¸ê°€ ì‘ì„±ìì—ê²Œ ì „ë‹¬ë©ë‹ˆë‹¤.')" class="flex-1 py-4 border rounded-2xl text-xs font-bold text-slate-500 flex items-center justify-center gap-2">
                        <i data-lucide="heart" class="w-4 h-4"></i> í¥ë¯¸Up 12
                    </button>
                    <button onclick="openNoteModal()" class="flex-1 py-4 bg-slate-900 text-white rounded-2xl text-xs font-bold flex items-center justify-center gap-2">
                        <i data-lucide="mail" class="w-4 h-4"></i> ìª½ì§€ ë³´ë‚´ê¸°
                    </button>
                </div>
                <div class="border-t pt-6">
                    <h4 class="text-xs font-bold text-slate-400 mb-4 uppercase tracking-widest">Comments</h4>
                    <div class="bg-slate-50 p-4 rounded-2xl">
                        <p class="text-xs text-slate-600 font-bold mb-1">ê³ ë§ˆìš´ì´ <span class="text-[9px] font-normal text-slate-400">ë°©ê¸ˆ ì „</span></p>
                        <p class="text-xs text-slate-500">ì™€... ì§„ì§œ ë³µë°›ìœ¼ì‹¤ ê±°ì˜ˆìš”! ê°ì‚¬í•©ë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>
            <div class="p-4 border-t bg-white safe-area-bottom">
                <input type="text" placeholder="ë”°ëœ»í•œ ëŒ“ê¸€ì„ ë‚¨ê²¨ì£¼ì„¸ìš”" class="w-full bg-slate-100 border-none rounded-full py-3 px-6 text-xs font-medium">
            </div>
        </section>
    </div>

    <!-- Bottom Navigation -->
    <nav id="bottom-nav" class="h-16 bg-white border-t flex justify-between items-center px-8 shrink-0 safe-area-bottom z-10">
        <button onclick="navigateTo('bus')" class="nav-btn flex flex-col items-center gap-1 text-slate-300" id="btn-bus">
            <i data-lucide="bus" class="w-6 h-6"></i>
            <span class="text-[9px] font-black">ë²„ìŠ¤íƒ€</span>
        </button>
        <button onclick="navigateTo('metro')" class="nav-btn flex flex-col items-center gap-1 text-slate-300" id="btn-metro">
            <i data-lucide="map" class="w-6 h-6"></i>
            <span class="text-[9px] font-black">ë©”íƒ€</span>
        </button>
        <button onclick="navigateTo('feed')" class="nav-btn flex flex-col items-center gap-1 text-indigo-600" id="btn-feed">
            <i data-lucide="message-square" class="w-6 h-6"></i>
            <span class="text-[9px] font-black">BMTA</span>
        </button>
        <button onclick="navigateTo('mypage')" class="nav-btn flex flex-col items-center gap-1 text-slate-300" id="btn-mypage">
            <i data-lucide="user" class="w-6 h-6"></i>
            <span class="text-[9px] font-black">ë§ˆì´</span>
        </button>
    </nav>

    <!-- Custom Alert Overlay -->
    <div id="alert-overlay" class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] hidden flex items-center justify-center p-10">
        <div class="bg-white rounded-[2.5rem] p-8 text-center space-y-6 shadow-2xl max-w-xs w-full animate-slide-up">
            <div id="alert-icon" class="w-16 h-16 bg-indigo-50 text-indigo-600 rounded-3xl flex items-center justify-center mx-auto">
                <i data-lucide="info" class="w-8 h-8"></i>
            </div>
            <p id="alert-msg" class="font-bold text-slate-800 leading-relaxed"></p>
            <button onclick="closeAlert()" class="w-full bg-slate-900 text-white font-black py-4 rounded-2xl shadow-lg">í™•ì¸</button>
        </div>
    </div>

    <!-- Note Modal -->
    <div id="note-modal" class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] hidden flex items-center justify-center p-10">
        <div class="bg-white rounded-[2.5rem] p-8 space-y-6 shadow-2xl max-w-sm w-full animate-slide-up">
            <div class="flex justify-between items-center">
                <h3 class="font-black text-xl text-slate-800 italic">Send Message</h3>
                <button onclick="closeNoteModal()"><i data-lucide="x" class="w-6 h-6 text-slate-300"></i></button>
            </div>
            <div class="bg-amber-50 p-4 rounded-2xl border border-amber-100 flex justify-between items-center">
                <span class="text-xs font-bold text-amber-700">ë³´ìœ  í¬ì¸íŠ¸</span>
                <span class="font-black text-amber-900">1,000 P</span>
            </div>
            <textarea placeholder="ì§„ì‹¬ì„ ë‹´ì€ ì²« ë©”ì‹œì§€ë¥¼ ë³´ë‚´ë³´ì„¸ìš”." class="w-full h-32 bg-slate-50 border-none rounded-2xl p-4 text-sm focus:ring-2 focus:ring-indigo-500"></textarea>
            <div class="bg-indigo-50 p-4 rounded-xl">
                <p class="text-[10px] text-indigo-700 font-bold leading-relaxed">âš ï¸ ì²« ìª½ì§€ ë°œì†¡ ì‹œ 1,000Pê°€ ì†Œëª¨ë©ë‹ˆë‹¤. ì´ëŠ” ë¬´ë¶„ë³„í•œ ìŠ¤íŒ¸ì„ ë°©ì§€í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.</p>
            </div>
            <button onclick="sendNote()" class="w-full bg-slate-900 text-white font-black py-4 rounded-2xl shadow-lg">1,000Pë¡œ ë°œì†¡í•˜ê¸°</button>
        </div>
    </div>

    <!-- Station Detail Bottom Sheet -->
    <div id="station-sheet" class="fixed inset-x-0 bottom-0 bg-white rounded-t-[3rem] z-50 transform translate-y-full transition-transform duration-300 shadow-[0_-20px_50px_rgba(0,0,0,0.1)]">
        <div class="w-12 h-1.5 bg-slate-200 rounded-full mx-auto my-4"></div>
        <div class="p-8 space-y-6 pb-12">
            <div class="flex justify-between items-center">
                <div>
                    <h3 id="station-name" class="text-2xl font-black text-slate-800">ê°•ë‚¨ì—­</h3>
                    <p class="text-sm font-bold text-green-600">2í˜¸ì„  â€¢ ì‹ ë¶„ë‹¹ì„ </p>
                </div>
                <div class="text-right">
                    <p class="text-xs font-bold text-slate-400 mb-1">ë‹¤ìŒ ì—´ì°¨</p>
                    <p class="font-black text-slate-800">ì „ì—­ ì§„ì… ì¤‘</p>
                </div>
            </div>
            <div class="grid grid-cols-2 gap-4">
                <button onclick="goToFeed('ì§€í•˜ì² ', '2í˜¸ì„  ê°•ë‚¨ì—­')" class="bg-indigo-600 text-white font-black py-4 rounded-2xl flex items-center justify-center gap-2">
                    <i data-lucide="message-square" class="w-4 h-4"></i> ì—­ë³„ í”¼ë“œ
                </button>
                <button onclick="showAlert('ì‹¤ì‹œê°„ ì‹œê°„í‘œ ì •ë³´ì…ë‹ˆë‹¤.')" class="bg-slate-100 text-slate-600 font-black py-4 rounded-2xl flex items-center justify-center gap-2">
                    <i data-lucide="clock" class="w-4 h-4"></i> ì‹œê°„í‘œ
                </button>
            </div>
        </div>
    </div>
    <div id="sheet-overlay" onclick="closeStationDetail()" class="fixed inset-0 bg-slate-900/40 z-40 hidden backdrop-blur-[2px]"></div>

</div>

<script>
    // --- Router Logic ---
    function navigateTo(screenId) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        const target = document.getElementById('screen-' + screenId);
        if (target) target.classList.add('active');

        // Nav active state
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.replace('text-indigo-600', 'text-slate-300'));
        const btn = document.getElementById('btn-' + screenId);
        if (btn) btn.classList.replace('text-slate-300', 'text-indigo-600');

        // Header and Nav visibility
        const header = document.getElementById('app-header');
        const bottomNav = document.getElementById('bottom-nav');
        
        if (['write-wizard', 'post-detail'].includes(screenId)) {
            header.style.display = 'none';
            bottomNav.style.display = 'none';
        } else {
            header.style.display = 'flex';
            bottomNav.style.display = 'flex';
        }

        // Title update
        const titles = { 'bus': 'Bus ì‹¤ì‹œê°„', 'metro': 'Metro ì‹¤ì‹œê°„', 'feed': 'BMTA', 'mypage': 'ë§ˆì´í˜ì´ì§€' };
        document.getElementById('header-title').innerText = titles[screenId] || 'BMTA';
        
        lucide.createIcons();
    }

    // --- Filter Logic ---
    function setTransportFilter(val) {
        document.querySelectorAll('.filter-t').forEach(b => {
            if (b.dataset.val === val) b.classList.replace('bg-slate-100', 'bg-indigo-600'), b.classList.replace('text-slate-400', 'text-white');
            else b.classList.replace('bg-indigo-600', 'bg-slate-100'), b.classList.replace('text-white', 'text-slate-400');
        });
        showAlert(val + ' í•„í„°ê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.');
    }

    // --- Write Wizard Logic ---
    function selectTransport(type) {
        document.querySelectorAll('.transport-btn').forEach(b => b.classList.replace('border-indigo-600', 'border-slate-100'), b.classList.replace('bg-indigo-50', 'bg-white'));
        // (Visual feedback logic...)
    }
    function nextStep(n) {
        document.getElementById('step-1').classList.add('hidden');
        document.getElementById('step-2').classList.remove('hidden');
        document.getElementById('write-step-num').innerText = n;
    }
    function submitPost() {
        showAlert('ì´ì•¼ê¸°ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤! 10Pê°€ ì ë¦½ë˜ì—ˆìŠµë‹ˆë‹¤.');
        navigateTo('feed');
        document.getElementById('step-2').classList.add('hidden');
        document.getElementById('step-1').classList.remove('hidden');
        document.getElementById('write-step-num').innerText = '1';
    }

    // --- Metro Logic ---
    function showStationDetail(name) {
        document.getElementById('station-name').innerText = name;
        document.getElementById('station-sheet').classList.remove('translate-y-full');
        document.getElementById('sheet-overlay').classList.remove('hidden');
    }
    function closeStationDetail() {
        document.getElementById('station-sheet').classList.add('translate-y-full');
        document.getElementById('sheet-overlay').classList.add('hidden');
    }
    function goToFeed(type, detail) {
        closeStationDetail();
        navigateTo('feed');
        showAlert(type + ' ' + detail + ' í”¼ë“œë¡œ ì´ë™í–ˆìŠµë‹ˆë‹¤.');
    }

    // --- Note Logic ---
    function openNoteModal() {
        document.getElementById('note-modal').classList.remove('hidden');
    }
    function closeNoteModal() {
        document.getElementById('note-modal').classList.add('hidden');
    }
    function sendNote() {
        closeNoteModal();
        document.getElementById('user-points').innerText = '0 P';
        showAlert('ìª½ì§€ê°€ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤! (1,000P ì†Œëª¨)');
    }

    // --- Global Helpers ---
    function showAlert(msg) {
        document.getElementById('alert-msg').innerText = msg;
        document.getElementById('alert-overlay').classList.remove('hidden');
        lucide.createIcons();
    }
    function closeAlert() {
        document.getElementById('alert-overlay').classList.add('hidden');
    }

    window.onload = () => {
        lucide.createIcons();
    };
</script>

</body>
</html>